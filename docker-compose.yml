version: '3'

services:
    front-end:
        restart: "unless-stopped"
        container_name: "dash-label"
        build: 
            context: 'front/'
            dockerfile: 'docker/Dockerfile'
        environment:
            DATA_DIR: "${PWD}/data/"
            MLCOACH_URL: "http://localhost:8062"
            DATA_CLINIC_URL: "http://localhost:8072"
        volumes:         
            - ./data:/app/work/data
            - ./front/src:/app/work/src
        ports:
            - '8057:8057'
        networks:
            - computing_api_default

    api:
        restart: "unless-stopped"
        container_name: "labelmaker-api"
        build:
          context: "api/"
          dockerfile: "docker/Dockerfile"
        environment:
          MONGO_INITDB_ROOT_USERNAME: '${MONGO_DB_USERNAME}'
          MONGO_INITDB_ROOT_PASSWORD: '${MONGO_DB_PASSWORD}'
        ports:
          - "8005:8005"
        networks:
          - computing_api_default

networks:
  computing_api_default:
    external: true